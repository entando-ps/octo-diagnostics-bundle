{"version":3,"sources":["ui-components/customUiComponents.js","Store.js","context/user-info/UserInfoContext.js","context/user-info/UserInfoManager.js","components/shared/GenericCard.js","components/Header.js","context/diagnostics/DiagnosticsContext.js","context/diagnostics/DiagnosticsManager.js","components/DevicesDiagnostics.js","helpers/metricUtils.js","components/ApiDiagnostics.js","http/helper.js","http/api.js","components/DiagnosticsInfo.js","App.js","locales/en.js","locales/it.js","utils/AppUtils.js","helpers/widgetEvents.js","context/diagnostics/DiagnosticsProvider.js","context/user-info/UserInfoProvider.js","WidgetElement.js","auth/widgetEventTypes.js","i18n.js"],"names":["LocalCustomAccordionDetails","initialState","serviceUrl","appName","logoUrl","themeColor","themeSecondaryColor","languageCode","language","createContainer","useState","Provider","useTracked","titleStyle","default","fontSize","fontWeight","marginBottom","color","setEmphText","text","className","style","spanEmph","CustomAccordionDetails","props","withStyles","root","display","backgroundColor","AccordionDetails","UserInfoContext","createContext","UserInfoManager","useContext","state","setState","platform","userInfo","setUserInfo","userInfoJson","JSON","parse","prevState","GenericCard","children","onLoading","boxShadow","textAlign","Header","DiagnosticsContext","DiagnosticsManager","devicesDiagnosticsData","apiDiagnosticsData","setApiDiagnosticsData","DevicesDiagnostics","lng","length","type","map","dev","index","deviceType","undefined","diagnostics","btDevices","key","firmware","metricNames","battery","serial","rssi","noBTDevices","metricNameMap","ApiDiagnostics","metric","il","name","icon","label","float","toLowerCase","speed","engineRpm","fuelLevel","counterIcon","width","height","odometer","roadVariant","mil","toggleSwitch","ignitionStatus","storedDtc","freezeDtc","vin","unknown","metricIconAndLabel","valueUnits","value","units","MN","Number","parseInt","ignitionStatusOn","ignitionStatusOff","marginTop","Date","date","toUTCString","noApiMetrics","getDefaultOptions","basicAuth64","headers","Headers","Authorization","document","cookie","split","find","row","startsWith","request","url","moreOptions","a","options","fetch","response","status","json","Promise","reject","Error","statusText","apiGetDiagnostics","voucherId","method","DiagnosticsInfo","setOnLoading","classes","makeStyles","theme","heading","typography","pxToRem","fontWeightBold","sectionTitle","useStyles","useEffect","then","res","payload","lastMetrics","catch","e","console","log","finally","padding","Typography","title","Accordion","AccordionSummary","expandIcon","aria-controls","id","App","en","button","next","tryAgain","verify","accept","refuse","gotIt","okGotIt","letsStart","error","emailAlreadyRegistered","wrongCodeTitle","wrongCodeMessage","sorry","somethingWrong","stepper","step","of","nameStep","welcome","whatIsYourName","firstname","lastname","vehiclePlate","vehicleBrand","vehicleModel","vehicleColor","14","12","11","9","5","4","1","0","details","your","speedLimit","poi","last","created","creationDate","lat","lon","radius","it","getUrlParam","parameter","urlparameter","window","location","href","indexOf","vars","search","replace","m","getUrlVars","DiagnosticsProvider","setDevicesDiagnosticsData","devicesDiagnosticsDataJson","prev","Android","userAuth","diagnosticData","UserInfoProvider","getKeycloakInstance","entando","keycloak","initialized","ATTRIBUTES","disableDefaultEventHandler","WidgetElement","oldValue","newValue","this","container","Object","values","includes","onToggleDisableDefaultEvent","render","getAttribute","initAppName","initLogoUrl","initThemeColor","initThemeSecondaryColor","initServiceUrl","eventType","eventHandler","langAttr","toString","initLanguageCode","initLanguage","mountPoint","createElement","appendChild","unsubscribeFromKeycloakEvent","addEventListener","removeEventListener","unsubscribeFromWidgetEvents","disableEventHandler","defaultEventHandlerDisabled","ReactDOM","HTMLElement","customElements","define","resources","translation","translationEN","i18n","use","detector","reactI18nextModule","init","keySeparator","interpolation","escapeValue"],"mappings":"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","file":"static/js/main.85cf32d3.chunk.js","sourcesContent":["import withStyles from \"@material-ui/core/styles/withStyles\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport React from \"react\";\r\nimport {initialState} from \"../Store\";\r\nimport {Chip} from \"@material-ui/core\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport AccordionDetails from \"@material-ui/core/AccordionDetails\";\r\n\r\nlet LocalCustomAccordionDetails\r\nlet LocalCustomChip\r\nlet LocalCustomTextField\r\nlet LocalCustomButton\r\nlet LocalSecondaryCustomButton\r\nlet LocalCustomValidationElement\r\nlet LocalCustomCheckbox\r\n\r\nexport const titleStyle = {\r\n  default: {\r\n    fontSize: '18pt',\r\n    fontWeight: 'bold',\r\n    marginBottom: '1rem',\r\n    color: '#46515f'\r\n  }\r\n};\r\n\r\nexport const spanEmph = (text) => {\r\n  return <span className={'overflow-wrap'} style={{color: initialState.themeColor}}>{text}</span>;\r\n};\r\n\r\nexport const setEmphText = (text) => {\r\n  return text === 'N/A' ? text : spanEmph(text);\r\n};\r\n\r\nexport const CustomChip = (props) => {\r\n  if (!LocalCustomChip) {\r\n    LocalCustomChip = withStyles({\r\n      root: {\r\n        color: initialState.themeColor,\r\n        backgroundColor: initialState.themeColor + \"15\",\r\n        fontWeight: 'bold'\r\n      }\r\n    })(Chip)\r\n  }\r\n\r\n  return <LocalCustomChip {...props}/>\r\n}\r\n\r\nexport const CustomAccordionDetails = (props) => {\r\n  if (!LocalCustomAccordionDetails) {\r\n\r\n    LocalCustomAccordionDetails = withStyles({\r\n      root: {\r\n        '&.MuiAccordionDetails-root': {\r\n          display: 'block',\r\n          backgroundColor: initialState.themeColor + \"20\",\r\n        }\r\n      },\r\n    })(AccordionDetails);\r\n  }\r\n  return <LocalCustomAccordionDetails {...props}/>\r\n}\r\n\r\nexport const CustomTextField = (props) => {\r\n  if (!LocalCustomTextField) {\r\n\r\n    LocalCustomTextField = withStyles({\r\n      root: {\r\n        '& label': {\r\n          fontFamily: 'SFProDisplay'\r\n        },\r\n        '& label.Mui-focused': {\r\n          color: initialState.themeColor,\r\n        },\r\n        '& .MuiFilledInput-underline:after': {\r\n          borderBottomColor: initialState.themeColor,\r\n        },\r\n        '& .MuiOutlinedInput-underline:after': {\r\n          borderBottomColor: initialState.themeColor,\r\n        },\r\n        '& .MuiInputBase-root': {\r\n          backgroundColor: 'rgba(0, 0, 0, 0.03)'\r\n        },\r\n      },\r\n    })(TextField);\r\n  }\r\n  return <LocalCustomTextField {...props}/>\r\n}\r\n\r\nexport const CustomButton = (props) => {\r\n  if (!LocalCustomButton) {\r\n    LocalCustomButton = withStyles({\r\n      root: {\r\n        width: \"100%\",\r\n        height: '48px',\r\n        backgroundColor: initialState.themeColor,\r\n        fontFamily: 'SFProDisplay',\r\n        fontSize: '16px',\r\n        textTransform: 'none',\r\n        '&:hover': {\r\n          backgroundColor: initialState.themeColor,\r\n          borderColor: initialState.themeColor,\r\n          boxShadow: 'none',\r\n        },\r\n        '&:active': {\r\n          boxShadow: 'none',\r\n          backgroundColor: initialState.themeColor,\r\n          borderColor: initialState.themeColor,\r\n        },\r\n        '&.MuiButton-contained.Mui-disabled': {\r\n          backgroundColor: '#dbdfe3',\r\n          color: \"#8b8b8b\",\r\n        },\r\n        borderRadius: '1px'\r\n\r\n      },\r\n    })(Button);\r\n  }\r\n  return <LocalCustomButton {...props}/>\r\n}\r\n\r\n\r\nexport const CustomSecondaryButton = (props) => {\r\n  if (!LocalSecondaryCustomButton) {\r\n    LocalSecondaryCustomButton = withStyles({\r\n      root: {\r\n        width: \"100%\",\r\n        height: '48px',\r\n        fontSize: '16px',\r\n        color: '#000',\r\n        backgroundColor: initialState.themeSecondaryColor,\r\n        border: 'solid 1px #000',\r\n        fontFamily: 'SFProDisplay',\r\n        textTransform: 'none',\r\n        '&:hover': {\r\n          color: '#000',\r\n          backgroundColor: initialState.themeSecondaryColor,\r\n          border: 'solid 1px #000',\r\n          boxShadow: 'none',\r\n        },\r\n        '&:active': {\r\n          color: '#000',\r\n          backgroundColor: initialState.themeSecondaryColor,\r\n          border: 'solid 1px #000',\r\n          boxShadow: 'none',\r\n        },\r\n        borderRadius: '1px'\r\n      },\r\n    })(Button);\r\n  }\r\n  return <LocalSecondaryCustomButton {...props}/>\r\n}\r\n\r\nexport const CustomCheckbox = (props) => {\r\n  if (!LocalCustomCheckbox) {\r\n    LocalCustomCheckbox = withStyles({\r\n      root: {\r\n        color: '#888',\r\n        formControlLabel: {\r\n          fontWeight: 'bold',\r\n          '& label': {fontWeight: 'bold'}\r\n        },\r\n        '&$checked': {\r\n          color: initialState.themeColor,\r\n        },\r\n      },\r\n      checked: {},\r\n    })((props) => <Checkbox {...props} />);\r\n  }\r\n\r\n  return <LocalCustomCheckbox {...props}/>\r\n}\r\n","import React, {useState} from 'react';\r\nimport {createContainer} from 'react-tracked';\r\n\r\nexport const initialState = {\r\n  serviceUrl: null,\r\n  appName: null,\r\n  logoUrl: null,\r\n  themeColor: null,\r\n  themeSecondaryColor: null,\r\n  languageCode: null,\r\n  language: null,\r\n};\r\n\r\nexport const initAppName = (appName) => initialState.appName = appName;\r\nexport const initLogoUrl = (logoUrl) => initialState.logoUrl = logoUrl;\r\nexport const initThemeColor = (themeColor) => initialState.themeColor = themeColor;\r\nexport const initThemeSecondaryColor = (themeSecondaryColor) => initialState.themeSecondaryColor = themeSecondaryColor;\r\nexport const initServiceUrl = (serviceUrl) => initialState.serviceUrl = serviceUrl;\r\nexport const initLanguageCode = (languageCode) => initialState.languageCode = languageCode;\r\nexport const initLanguage = (language) => initialState.language = language;\r\n\r\nconst useAppState = () => useState(initialState);\r\n\r\nexport const {\r\n  Provider,\r\n  useTracked,\r\n} = createContainer(useAppState);\r\n\r\n\r\n\r\n","import { createContext } from 'react';\r\n\r\n// eslint-disable-next-line no-unused-vars\r\nconst UserInfoContext = createContext([{}, () => {}]);\r\n\r\nexport default UserInfoContext;\r\n","import {useContext} from 'react';\r\nimport UserInfoContext from './UserInfoContext';\r\n\r\nconst UserInfoManager = () => {\r\n  const [state, setState] = useContext(UserInfoContext);\r\n\r\n  const setUserInfo = (platform, userInfoJson) => {\r\n    const userInfo = JSON.parse(userInfoJson);\r\n    setState(prevState => ({\r\n      ...prevState,\r\n      platform,\r\n      userInfo\r\n    }));\r\n  };\r\n\r\n  return {\r\n    platform: state.platform,\r\n    userInfo: state.userInfo,\r\n    setUserInfo\r\n  };\r\n};\r\n\r\nexport default UserInfoManager;\r\n","import CircularProgress from \"@material-ui/core/CircularProgress/CircularProgress\";\r\nimport React from \"react\";\r\nimport {useTracked} from \"../../Store\";\r\n\r\nexport const GenericCard = ({children, onLoading}) => {\r\n  const [state] = useTracked();\r\n\r\n  return (\r\n      <div className=\"card\" style={{boxShadow: '0 0 8px 0 ' + state.themeColor + '80'}}>\r\n        <div className=\"card-title\">\r\n          {children[0]}\r\n        </div>\r\n        {onLoading ?\r\n            <div style={{textAlign: 'center'}}><CircularProgress style={{color: state.themeColor}}/></div> :\r\n            <div className={'mt-2 font12'}>\r\n              {children[1]}\r\n            </div>\r\n        }\r\n      </div>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport {useTracked} from \"../Store\";\r\nimport {setEmphText, titleStyle} from \"../ui-components/customUiComponents\";\r\nimport {UserInfo} from \"./UserInfo\";\r\n\r\nexport const Header = () => {\r\n  const [state] = useTracked();\r\n\r\n  return (\r\n      <div className={'header-frame'}>\r\n        <div style={titleStyle.default}>\r\n          {state.languageCode === 'it' ?\r\n              <>{setEmphText(\"Diagnostica\")}</>\r\n              : <>{setEmphText(\"Diagnostics\")}</>}\r\n          {/*<UserInfo/>*/}\r\n        </div>\r\n\r\n      </div>\r\n  )\r\n};\r\n","import { createContext } from 'react';\r\n\r\n// eslint-disable-next-line no-unused-vars\r\nconst DiagnosticsContext = createContext([{}, () => {}]);\r\n\r\nexport default DiagnosticsContext;\r\n","import {useContext} from 'react';\r\nimport DiagnosticsContext from './DiagnosticsContext';\r\n\r\nconst DiagnosticsManager = () => {\r\n  const [state, setState] = useContext(DiagnosticsContext);\r\n\r\n  const setApiDiagnosticsData = (apiDiagnosticsData) => {\r\n    setState(prevState => ({\r\n      ...prevState,\r\n      apiDiagnosticsData\r\n    }));\r\n  };\r\n  return {\r\n    devicesDiagnosticsData: state.devicesDiagnosticsData,\r\n    apiDiagnosticsData: state.apiDiagnosticsData,\r\n    setApiDiagnosticsData\r\n  };\r\n};\r\n\r\nexport default DiagnosticsManager;\r\n","import React from \"react\";\r\nimport DiagnosticsManager from \"../context/diagnostics/DiagnosticsManager\";\r\nimport {setEmphText, titleStyle} from \"../ui-components/customUiComponents\";\r\nimport {GenericCard} from \"./shared/GenericCard\";\r\nimport {useTracked} from \"../Store\";\r\n\r\nexport const DevicesDiagnostics = () => {\r\n  const [state] = useTracked();\r\n  const lng = state.language;\r\n  const {devicesDiagnosticsData} = DiagnosticsManager();\r\n  const dataExist = devicesDiagnosticsData.length > 0 && devicesDiagnosticsData[0].type !== 0;\r\n\r\n  const noData = () => {\r\n    return <>\r\n      <div className={'mt-2 font14'}>\r\n        {lng.diagnostics.noBTDevices}\r\n      </div>\r\n    </>\r\n  };\r\n\r\n  const data = () => {\r\n    return (\r\n        <>\r\n          {devicesDiagnosticsData.map((dev, index) => {\r\n            const deviceType = lng.diagnostics.btDevices[dev.type] !== undefined ? lng.diagnostics.btDevices[dev.type] : lng.diagnostics.btDevices[0];\r\n            return (\r\n                <div style={titleStyle.default} key={index}>\r\n                  <GenericCard\r\n                      children={[\r\n                        <>\r\n                          {setEmphText(deviceType)}\r\n                        </>,\r\n                        <>\r\n                          <div>Firmware: {setEmphText(dev.firmware)}</div>\r\n                          <div>{lng.diagnostics.metricNames.battery}: {setEmphText(dev.battery)}</div>\r\n                          <div>{lng.diagnostics.metricNames.serial}: {setEmphText(dev.serial)}</div>\r\n                          <div>RSSI: {setEmphText(dev.rssi)}</div>\r\n                        </>\r\n                      ]}\r\n                      onLoading={false}\r\n                  />\r\n                </div>\r\n            )\r\n          })}\r\n        </>\r\n    )\r\n  };\r\n\r\n  return dataExist ? data() : noData();\r\n\r\n};\r\n","import SpeedTwoToneIcon from '@material-ui/icons/SpeedTwoTone';\r\nimport LocalGasStationTwoToneIcon from '@material-ui/icons/LocalGasStationTwoTone';\r\nimport { Icon } from '@iconify/react';\r\nimport InfoIcon from '@material-ui/icons/Info';\r\nimport counterIcon from \"@iconify-icons/mdi/counter\";\r\nimport roadVariant from \"@iconify-icons/mdi/road-variant\";\r\nimport toggleSwitch from \"@iconify-icons/mdi/toggle-switch\";\r\nimport React from \"react\";\r\n\r\nexport const metricNameMap = {\r\n  SPEED: \"speed\",\r\n  ENGINE: \"engine rpm\",\r\n  FUEL: \"fuel level absolute\",\r\n  ODOMETER: \"odometer\",\r\n  MIL: \"mil\",\r\n  IGNITION: \"ignition status\",\r\n  STORED_DTC: \"stored dtc\",\r\n  FREEZE_DTC: \"freeze dtc\",\r\n  VIN: \"vin\"\r\n};\r\n\r\nexport const metricIconAndLabel = (name, lng) => {\r\n  if (name === undefined || name === null) {\r\n    return <></>\r\n  }\r\n  const style = {float: 'right'};\r\n  const fontSize = \"large\";\r\n  name = name.toLowerCase();\r\n\r\n  let icon;\r\n  let label;\r\n\r\n  switch (name) {\r\n    case metricNameMap.SPEED:\r\n      icon = <SpeedTwoToneIcon style={style} fontSize={fontSize}/>;\r\n      label = lng.diagnostics.metricNames.speed;\r\n      break;\r\n    case metricNameMap.ENGINE:\r\n      icon = <SpeedTwoToneIcon style={style} fontSize={fontSize}/>;\r\n      label = lng.diagnostics.metricNames.engineRpm;\r\n      break;\r\n    case metricNameMap.FUEL:\r\n      icon = <LocalGasStationTwoToneIcon style={style} fontSize={fontSize}/>;\r\n      label = lng.diagnostics.metricNames.fuelLevel;\r\n      break;\r\n    case metricNameMap.ODOMETER:\r\n      icon = <Icon icon={counterIcon} style={style} width={'1.8em'} height={'1.8em'}/>;\r\n      label = lng.diagnostics.metricNames.odometer;\r\n      break;\r\n    case metricNameMap.MIL:\r\n      icon = <Icon icon={roadVariant} style={style} width={'1.8em'} height={'1.8em'}/>;\r\n      label = lng.diagnostics.metricNames.mil;\r\n      break;\r\n    case metricNameMap.IGNITION:\r\n      icon = <Icon icon={toggleSwitch} style={style} width={'1.8em'} height={'1.8em'}/>;\r\n      label = lng.diagnostics.metricNames.ignitionStatus;\r\n      break;\r\n    case metricNameMap.STORED_DTC:\r\n      icon = <InfoIcon style={style} fontSize={fontSize}/>;\r\n      label = lng.diagnostics.metricNames.storedDtc;\r\n      break;\r\n    case metricNameMap.FREEZE_DTC:\r\n      icon = <InfoIcon style={style} fontSize={fontSize}/>;\r\n      label = lng.diagnostics.metricNames.freezeDtc;\r\n      break;\r\n    case metricNameMap.VIN:\r\n      icon = <InfoIcon style={style} fontSize={fontSize}/>;\r\n      label = lng.diagnostics.metricNames.vin;\r\n      break;\r\n    default:\r\n      icon = <InfoIcon style={style} fontSize={fontSize}/>;\r\n      label = lng.diagnostics.metricNames.unknown;\r\n  }\r\n\r\n  return {icon, label};\r\n};\r\n","import DiagnosticsManager from \"../context/diagnostics/DiagnosticsManager\";\r\nimport {setEmphText, titleStyle} from \"../ui-components/customUiComponents\";\r\nimport {GenericCard} from \"./shared/GenericCard\";\r\nimport React from \"react\";\r\nimport {useTracked} from \"../Store\";\r\nimport {metricIconAndLabel, metricNameMap as MN} from \"../helpers/metricUtils\";\r\n\r\nexport const ApiDiagnostics = () => {\r\n  const [state] = useTracked();\r\n  const lng = state.language;\r\n  const {apiDiagnosticsData} = DiagnosticsManager();\r\n  const dataExist = apiDiagnosticsData && apiDiagnosticsData.length > 0;\r\n\r\n  const noData = () => {\r\n    return <>\r\n      <div className={'mt-2 font14'}>\r\n        {lng.diagnostics.noApiMetrics}\r\n      </div>\r\n    </>\r\n  };\r\n\r\n  const data = () => {\r\n    return (\r\n        <>\r\n          {apiDiagnosticsData.map((metric, index) => {\r\n            const il = metricIconAndLabel(metric.name, lng);\r\n            let valueUnits = metric.value + \" \" + metric.units;\r\n            if (MN.IGNITION === metric.name.toLowerCase()) {\r\n              valueUnits = Number.parseInt(metric.value) === 1 ? lng.diagnostics.metricNames.ignitionStatusOn : lng.diagnostics.metricNames.ignitionStatusOff;\r\n            }\r\n            return (\r\n                <div style={titleStyle.default} key={index}>\r\n                  <GenericCard\r\n                      children={[\r\n                        <>\r\n                          {setEmphText(il.label)}\r\n                          {il.icon}\r\n                        </>,\r\n                        <>\r\n                          <div style={{marginTop: '-1.4rem'}}>{valueUnits}</div>\r\n                          <div className={'date-info'}>{new Date(metric.date).toUTCString()}</div>\r\n                        </>\r\n                      ]}\r\n                      onLoading={false}\r\n                  />\r\n                </div>\r\n            );\r\n          })}\r\n        </>\r\n    )\r\n  };\r\n\r\n  return dataExist ? data() : noData();\r\n};\r\n","export const getKeycloakToken = () => {\r\n  if (\r\n      window &&\r\n      window.entando &&\r\n      window.entando.keycloak &&\r\n      window.entando.keycloak.authenticated\r\n  ) {\r\n    return window.entando.keycloak.token;\r\n  }\r\n  return '';\r\n};\r\n\r\nexport const getCookie = name => {\r\n  return document.cookie && document.cookie.split('; ').find(row => row.startsWith(name + '=')) ?\r\n      document.cookie.split('; ').find(row => row.startsWith(name + '=')).split('=')[1]\r\n      : null;\r\n};\r\n\r\nexport const getDefaultOptions = (basicAuth64) => ({\r\n  headers: new Headers({\r\n    // Authorization: buildBasicAuthHeader('kagosi7953@sdysofa.com','Testtest1!'),\r\n    // Authorization: `Bearer ${getKeycloakToken()}`,\r\n    Authorization: `Basic ${basicAuth64}`,\r\n    'Content-Type': 'application/json',\r\n    'Cookie' : getCookie('idOperator')\r\n  }),\r\n});\r\n\r\nconst buildBasicAuthHeader = (username, password) => {\r\n  return \"Basic \" + btoa(username + \":\" + password);\r\n};\r\n\r\nexport const request = async (url, basicAuth64, moreOptions) => {\r\n  const options = {...getDefaultOptions(basicAuth64), ...moreOptions, }\r\n  const response = await fetch(url, options);\r\n  if (response.status === 401) {\r\n    // window.location.replace('https://accounts.google.com/signin/v2/identifier?hl=it&passive=true&flowName=GlifWebSignIn&flowEntry=ServiceLogin');\r\n  }\r\n  if (response.status === 204) {\r\n    return {};\r\n  }\r\n  if (response.status >= 200 && response.status < 300) {\r\n    return response.json();\r\n  }\r\n  return Promise.reject(new Error(response.statusText || response.status));\r\n};\r\n","import {request} from \"./helper\";\r\n\r\nexport const apiGetSpeedLimit = async (serviceUrl, userInfo) => {\r\n  const url = `${serviceUrl}/diagnostics/${userInfo.voucherId}/speedLimit`;\r\n  const options = {\r\n    method: 'GET',\r\n  };\r\n  return await request(url, userInfo.basicAuth64, options);\r\n};\r\n\r\nexport const apiGetPoi = async (serviceUrl, userInfo) => {\r\n  const url = `${serviceUrl}/diagnostics/${userInfo.voucherId}/poi`;\r\n  const options = {\r\n    method: 'GET',\r\n  };\r\n  return request(url, userInfo.basicAuth64, options);\r\n};\r\n\r\nexport const apiGetDiagnostics = async (serviceUrl, userInfo) => {\r\n  const url = `${serviceUrl}/diagnostics/${userInfo.voucherId}`;\r\n  const options = {\r\n    method: 'GET',\r\n  };\r\n  return request(url, userInfo.basicAuth64, options);\r\n};\r\n","import React, {useEffect, useState} from \"react\";\r\nimport DiagnosticsManager from \"../context/diagnostics/DiagnosticsManager\";\r\nimport {CustomAccordionDetails, setEmphText, titleStyle} from \"../ui-components/customUiComponents\";\r\nimport {useTracked} from \"../Store\";\r\nimport Accordion from \"@material-ui/core/Accordion\";\r\nimport AccordionSummary from \"@material-ui/core/AccordionSummary\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\r\nimport {DevicesDiagnostics} from \"./DevicesDiagnostics\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress/CircularProgress\";\r\nimport {ApiDiagnostics} from \"./ApiDiagnostics\";\r\nimport {apiGetDiagnostics} from \"../http/api\";\r\nimport UserInfoManager from \"../context/user-info/UserInfoManager\";\r\nimport BluetoothTwoToneIcon from '@material-ui/icons/BluetoothTwoTone';\r\nimport DirectionsCarTwoToneIcon from '@material-ui/icons/DirectionsCarTwoTone';\r\n\r\nexport const DiagnosticsInfo = () => {\r\n  const [state] = useTracked();\r\n  const lng = state.language;\r\n  const [onLoading, setOnLoading] = useState(false);\r\n  const {userInfo} = UserInfoManager();\r\n  const {setApiDiagnosticsData} = DiagnosticsManager();\r\n\r\n  const useStyles = makeStyles((theme) => ({\r\n    heading: {\r\n      fontSize: theme.typography.pxToRem(16),\r\n      fontWeight: theme.typography.fontWeightBold,\r\n      color: '#46515f'\r\n    },\r\n    sectionTitle: {\r\n      fontSize: theme.typography.pxToRem(20),\r\n      fontWeight: theme.typography.fontWeightBold,\r\n      color: '#46515f',\r\n      marginBottom: '0.5rem'\r\n    }\r\n  }));\r\n  const classes = useStyles();\r\n\r\n  useEffect(() => {\r\n    if (!userInfo || userInfo.basicAuth64 === \"N/A\") {\r\n      return;\r\n    }\r\n    setOnLoading(true);\r\n    apiGetDiagnostics(state.serviceUrl, userInfo).then(res => {\r\n      setApiDiagnosticsData(res.payload.lastMetrics)\r\n    })\r\n    .catch( e => {\r\n      console.log('ERR GET DiagnosticsData: ', e);\r\n    })\r\n    .finally(() => setOnLoading(false));\r\n\r\n  },[userInfo]);\r\n\r\n  return (\r\n      <>\r\n        <div style={ {...titleStyle.default, padding: '0.5rem'}}>\r\n          <Typography className={classes.sectionTitle}>{lng.diagnostics.title}</Typography>\r\n          <Accordion>\r\n            <AccordionSummary\r\n                expandIcon={<ExpandMoreIcon />}\r\n                aria-controls=\"panel1a-content\"\r\n                id=\"panel1a-header\"\r\n            >\r\n              <BluetoothTwoToneIcon className={'diagnostics-source-icon'} fontSize={\"large\"}/>\r\n              <Typography className={classes.heading}>{state.languageCode === 'it' ?\r\n                  <>dei tuoi dispositivi {setEmphText('bluetooth')}</>\r\n                  : <>from your {setEmphText('bluetooth')} devices</>}\r\n              </Typography>\r\n            </AccordionSummary>\r\n            <CustomAccordionDetails>\r\n              <DevicesDiagnostics/>\r\n            </CustomAccordionDetails>\r\n          </Accordion>\r\n          <Accordion style={{marginTop: '1rem'}}>\r\n            <AccordionSummary\r\n                expandIcon={<ExpandMoreIcon />}\r\n                aria-controls=\"panel2a-content\"\r\n                id=\"panel2a-header\"\r\n            >\r\n              <DirectionsCarTwoToneIcon className={'diagnostics-source-icon'} fontSize={\"large\"}/>\r\n              <Typography className={classes.heading}>\r\n                {state.languageCode === 'it' ?\r\n                    <>del tuo {setEmphText('veicolo')}</>\r\n                    : <>from your {setEmphText('vehicle')}</>}\r\n              </Typography>\r\n            </AccordionSummary>\r\n            <CustomAccordionDetails>\r\n              {onLoading ?\r\n                  <div style={{textAlign: 'center'}}><CircularProgress style={{color: state.themeColor}}/></div> :\r\n                  <ApiDiagnostics/>\r\n              }\r\n            </CustomAccordionDetails>\r\n          </Accordion>\r\n        </div>\r\n      </>\r\n  )\r\n\r\n};\r\n","import React from 'react';\r\nimport './App.css';\r\nimport {Header} from \"./components/Header\";\r\nimport {DiagnosticsInfo} from \"./components/DiagnosticsInfo\";\r\n\r\nexport const App = () => {\r\n\r\n  return (\r\n      <div className={'main-frame'}>\r\n        <div className={'content-frame'}>\r\n          <Header/>\r\n          <DiagnosticsInfo/>\r\n          {/*<SpeedLimitCard/>*/}\r\n          {/*<PoiCard/>*/}\r\n        </div>\r\n      </div>\r\n  )\r\n};\r\n","export const en = {\r\n  language: \"EN\",\r\n  button: {\r\n    next: \"Next\",\r\n    tryAgain: \"Try again\",\r\n    verify: \"Verify\",\r\n    accept: \"Accept\",\r\n    refuse: \"Refuse\",\r\n    gotIt: \"Got it\",\r\n    okGotIt: \"Ok, got it\",\r\n    letsStart: \"Let's start\"\r\n  },\r\n  error: {\r\n    tryAgain: \"An error has occurred, please try again.\",\r\n    emailAlreadyRegistered: \"This email is already registered\",\r\n    wrongCodeTitle: \"Wrong Phone Verification Code\",\r\n    wrongCodeMessage: \"There was an error with your Verification Code. Please try again.\",\r\n    sorry: \"We're sorry\",\r\n    somethingWrong: \"Something has gone wrong, retry.\"\r\n  },\r\n  stepper: {\r\n    step: \"Step \",\r\n    of: \" of \"\r\n  },\r\n  nameStep: {\r\n    welcome: \"Welcome to \",\r\n    whatIsYourName: \"What is your name?\",\r\n    firstname: \"Name\",\r\n    lastname: \"Last name\",\r\n    vehiclePlate: \"Vehicle plate\",\r\n    vehicleBrand: \"Vehicle brand\",\r\n    vehicleModel: \"Vehicle model\",\r\n    vehicleColor: \"Vehicle color\"\r\n  },\r\n  diagnostics: {\r\n    title: 'Diagnostics data:',\r\n    noBTDevices: \"No BT devices\",\r\n    noApiMetrics: \"No data available\",\r\n    btDevices: {\r\n      14: \"SM Tag\",\r\n      12: \"PurePlace\",\r\n      11: \"Smart Tag\",\r\n      9: \"Smoke Detector\",\r\n      5: \"Smart Key\",\r\n      4: \"Transponder Tag (Nano)\",\r\n      1: \"Box\",\r\n      0: \"Unknown device\"\r\n    },\r\n    metricNames: {\r\n      battery: 'Battery',\r\n      serial: 'Serial',\r\n      speed: 'Speed',\r\n      engineRpm: 'Engine RPM',\r\n      fuelLevel: 'Fuel level absolute',\r\n      odometer: 'Odometer',\r\n      mil: 'MIL',\r\n      ignitionStatus: 'Ignition status',\r\n      ignitionStatusOn: 'On',\r\n      ignitionStatusOff: 'Off',\r\n      storedDtc: 'Stored DTC',\r\n      freezeDtc: 'Freeze DTC',\r\n      vin: 'VIN',\r\n      unknown: 'Unknown metric'\r\n    },\r\n    details: 'Details',\r\n    speed:{\r\n      your: 'Your ',\r\n      speedLimit: 'speed limit ',\r\n    },\r\n    poi:{\r\n      last: 'Last created ',\r\n      poi: 'Point Of Interest ',\r\n      created: 'created by ',\r\n      creationDate: 'Creation date',\r\n      lat: 'Latitude',\r\n      lon: 'Longitude',\r\n      radius: 'Radius'\r\n    }\r\n  }\r\n};\r\n","export const it = {\r\n  language: \"IT\",\r\n  button: {\r\n    next: \"Avanti\",\r\n    tryAgain: \"Riprova\",\r\n    verify: \"Avanti\",\r\n    accept: \"Accetta\",\r\n    refuse: \"Ignora\",\r\n    gotIt: \"Ho capito\",\r\n    okGotIt: \"Ho capito\",\r\n    letsStart: \"Iniziamo\"\r\n  },\r\n  error: {\r\n    tryAgain: \"Si è verificato un errore, si prega di riprovare.\",\r\n    emailAlreadyRegistered: \"Questo indirizzo è già registrato\",\r\n    wrongCodeTitle: \"Codice di verifica telefono errato\",\r\n    wrongCodeMessage: \"C'è stato un errore con il codice di verifica. Si prega di riprovare.\",\r\n    sorry: \"Ci dispiace\",\r\n    somethingWrong: \"Si è verificato un errore, si prega di riprovare.\"\r\n  },\r\n  stepper: {\r\n    step: \"Passo \",\r\n    of: \" di \"\r\n  },\r\n  nameStep: {\r\n    welcome: \"Benvenuto su \",\r\n    whatIsYourName: \"Qual è il tuo nome?\",\r\n    firstname: \"Nome\",\r\n    lastname: \"Cognome\",\r\n    vehiclePlate: \"Targa veicolo\",\r\n    vehicleBrand: \"Marca veicolo\",\r\n    vehicleModel: \"Modello veicolo\",\r\n    vehicleColor: \"Colore veicolo\"\r\n  },\r\n  diagnostics: {\r\n    title: 'I dati di diagnostica:',\r\n    noBTDevices: \"Non ci sono dispositivi BT\",\r\n    noApiMetrics: \"Non ci sono dati disponibili\",\r\n    btDevices: {\r\n      14: \"SM Tag\",\r\n      12: \"PurePlace\",\r\n      11: \"Smart Tag\",\r\n      9: \"Rilevatore di fumo\",\r\n      5: \"Smart Key\",\r\n      4: \"Transponder Tag (Nano)\",\r\n      1: \"Box\",\r\n      0: \"Dispositivo sconosciuto\"\r\n    },\r\n    metricNames: {\r\n      battery: 'Batteria',\r\n      serial: 'Seriale',\r\n      speed: 'Velocità',\r\n      engineRpm: 'Giri del motore',\r\n      fuelLevel: 'Livello assoluto di carburante',\r\n      odometer: 'Contachilometri',\r\n      mil: 'MIL',\r\n      ignitionStatus: 'Stato del motore',\r\n      ignitionStatusOn: 'Acceso',\r\n      ignitionStatusOff: 'Spento',\r\n      storedDtc: 'Riserva DTC',\r\n      freezeDtc: 'DTC congelato',\r\n      vin: 'VIN',\r\n      unknown: 'Dato sconosciuto'\r\n    },\r\n    details: 'Dettagli',\r\n    speed:{\r\n      your: 'Il tuo ',\r\n      speedLimit: 'limite di velocità ',\r\n    },\r\n    poi:{\r\n      last: 'L\\'ultimo ',\r\n      poi: 'Point Of Interest ',\r\n      created: 'creato da ',\r\n      creationDate: 'Data di creazione',\r\n      lat: 'Latitudine',\r\n      lon: 'Longitudine',\r\n      radius: 'Raggio'\r\n    }\r\n  }\r\n};\r\n","export function getUrlVars() {\r\n  let vars = {};\r\n  window.location.search.replace(/[?&]+([^=&]+)=([^&]*)/gi,\r\n    function (m, key, value) {\r\n      vars[key] = value;\r\n    });\r\n  return vars;\r\n}\r\n\r\nexport function getUrlParam(parameter) {\r\n  let urlparameter;\r\n  if (window.location.href.indexOf(parameter) > -1) {\r\n    urlparameter = getUrlVars()[parameter];\r\n  }\r\n  return urlparameter;\r\n}\r\n","export const publishWidgetEvent = (eventType, payload) => {\r\n  const widgetEvent = new CustomEvent(eventType, {\r\n    detail: {\r\n      payload,\r\n    },\r\n  });\r\n  window.dispatchEvent(widgetEvent);\r\n};\r\n\r\nexport const createWidgetEventPublisher = eventType => payload =>\r\n  publishWidgetEvent(eventType, payload);\r\n\r\nexport const subscribeToWidgetEvent = (eventType, eventHandler) => {\r\n  window.addEventListener(eventType, eventHandler);\r\n\r\n  return () => {\r\n    window.removeEventListener(eventType, eventHandler);\r\n  };\r\n};\r\n\r\nexport const subscribeToWidgetEvents = (widgetEvents, eventHandler) => {\r\n  widgetEvents.forEach(eventType => window.addEventListener(eventType, eventHandler));\r\n\r\n  return () => {\r\n    widgetEvents.forEach(eventType => window.removeEventListener(eventType, eventHandler));\r\n  };\r\n};\r\n\r\nexport const widgetEventToFSA = widgetEvent => {\r\n  // for info about Flux Standard Action (FSA) see https://github.com/redux-utilities/flux-standard-action\r\n  const {\r\n    type,\r\n    detail: { payload, error, meta },\r\n  } = widgetEvent;\r\n  return { type, payload, error, meta };\r\n};\r\n","import PropTypes from 'prop-types';\r\nimport React, {useEffect, useState} from 'react';\r\nimport DiagnosticsContext from './DiagnosticsContext';\r\nimport UserInfoManager from \"../user-info/UserInfoManager\";\r\n\r\nconst DiagnosticsProvider = ({children}) => {\r\n  const [state, setState] = useState({\r\n    devicesDiagnosticsData: [],\r\n    apiDiagnosticsData: []\r\n  });\r\n\r\n  const {setUserInfo} = UserInfoManager();\r\n\r\n  const setDevicesDiagnosticsData = devicesDiagnosticsDataJson => {\r\n    const devicesDiagnosticsData = JSON.parse(devicesDiagnosticsDataJson);\r\n    setState(prev => ({...prev, devicesDiagnosticsData}));\r\n  };\r\n\r\n\r\n  useEffect(() => {\r\n    // eslint-disable-next-line react/prop-types\r\n    if (window.Android) {\r\n\r\n      console.log(\"Calling Android functions\");\r\n\r\n      const platform = 'Android';\r\n      const userInfoJson = window.Android.userAuth();\r\n      setUserInfo(platform, userInfoJson);\r\n      const devicesDiagnosticsDataJson = window.Android.diagnosticData();\r\n      setDevicesDiagnosticsData(devicesDiagnosticsDataJson);\r\n\r\n    } else {\r\n      console.log(\"Setting in the window the functions to be called from iOS\");\r\n\r\n      window.userAuth = function (userInfoJson) {\r\n        const platform = 'iOS';\r\n        setUserInfo(platform, userInfoJson);\r\n      };\r\n\r\n      window.diagnosticData = function(devicesDiagnosticsDataJson){\r\n        setDevicesDiagnosticsData(devicesDiagnosticsDataJson);\r\n      };\r\n\r\n    }\r\n  }, []);\r\n\r\n\r\n  return <DiagnosticsContext.Provider value={[state, setState]}> {children} </DiagnosticsContext.Provider>;\r\n};\r\n\r\nDiagnosticsProvider.propTypes = {\r\n  children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node), PropTypes.node]).isRequired,\r\n};\r\n\r\nexport default DiagnosticsProvider;\r\n","import PropTypes from 'prop-types';\r\nimport React, {useState} from 'react';\r\nimport UserInfoContext from './UserInfoContext';\r\n\r\nconst UserInfoProvider = ({children}) => {\r\n  const [state, setState] = useState({\r\n    platform: 'N/A',\r\n    userInfo : {\r\n      basicAuth64: 'N/A',\r\n      voucherId: 'N/A'\r\n    }\r\n  });\r\n\r\n  return <UserInfoContext.Provider value={[state, setState]}> {children} </UserInfoContext.Provider>;\r\n};\r\n\r\nUserInfoProvider.propTypes = {\r\n  children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node), PropTypes.node]).isRequired,\r\n};\r\n\r\nexport default UserInfoProvider;\r\n","import React from 'react';\r\nimport {App} from './App';\r\nimport {\r\n  initAppName,\r\n  initLanguage,\r\n  initLanguageCode,\r\n  initLogoUrl,\r\n  initServiceUrl,\r\n  initThemeColor,\r\n  initThemeSecondaryColor,\r\n  Provider,\r\n} from \"./Store\";\r\nimport * as ReactDOM from \"react-dom\";\r\nimport {en} from \"./locales/en\";\r\nimport {it} from \"./locales/it\";\r\nimport {getUrlParam} from \"./utils/AppUtils\";\r\nimport {subscribeToWidgetEvent} from \"./helpers/widgetEvents\";\r\nimport {KEYCLOAK_EVENT_TYPE} from \"./auth/widgetEventTypes\";\r\nimport DiagnosticsProvider from \"./context/diagnostics/DiagnosticsProvider\";\r\nimport UserInfoProvider from \"./context/user-info/UserInfoProvider\";\r\n\r\nconst getKeycloakInstance = () =>\r\n    (window &&\r\n        window.entando &&\r\n        window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n      initialized: false,\r\n    };\r\n\r\nconst ATTRIBUTES = {\r\n  id: 'id',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass WidgetElement extends HTMLElement {\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  jss;\r\n  container;\r\n  mountPoint;\r\n\r\n  unsubscribeFromWidgetEvents;\r\n  unsubscribeFromKeycloakEvent;\r\n  defaultEventHandlerDisabled;\r\n\r\n  callback;\r\n\r\n  static get observedAttributes() {\r\n    return Object.values(ATTRIBUTES);\r\n  }\r\n\r\n  attributeChangedCallback(name, oldValue, newValue) {\r\n    if (!this.container || oldValue === newValue) {\r\n      return;\r\n    }\r\n    if (!Object.values(ATTRIBUTES).includes(name)) {\r\n      throw new Error(`Untracked changed attribute: ${name}`);\r\n    }\r\n    if (name === ATTRIBUTES.disableDefaultEventHandler) {\r\n      this.onToggleDisableDefaultEvent();\r\n    }\r\n    this.render();\r\n  }\r\n\r\n  connectedCallback() {\r\n\r\n    let appName = this.getAttribute(\"app-name\");\r\n    let logoUrl = this.getAttribute(\"logo-url\");\r\n    let themeColor = this.getAttribute(\"theme-color\");\r\n    let themeSecondaryColor = this.getAttribute(\"theme-secondary-color\");\r\n    let serviceUrl = this.getAttribute(\"service-url\");\r\n    initAppName(appName);\r\n    initLogoUrl(logoUrl);\r\n    initThemeColor(themeColor);\r\n    initThemeSecondaryColor(themeSecondaryColor);\r\n    initServiceUrl(serviceUrl);\r\n\r\n    let langAttr = getUrlParam(\"lang\");\r\n    let languageCode = langAttr && langAttr.toString().toLowerCase() === 'en' ? 'en' : 'it';\r\n    let language = languageCode === 'en' ? en : it;\r\n    initLanguageCode(languageCode);\r\n    initLanguage(language);\r\n\r\n    this.mountPoint = document.createElement('div');\r\n    this.appendChild(this.mountPoint);\r\n\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.onToggleDisableDefaultEvent();\r\n\r\n    this.render();\r\n\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    if (this.unsubscribeFromWidgetEvents) {\r\n      this.unsubscribeFromWidgetEvents();\r\n    }\r\n    if (this.unsubscribeFromKeycloakEvent) {\r\n      this.unsubscribeFromKeycloakEvent();\r\n    }\r\n  }\r\n\r\n  onToggleDisableDefaultEvent() {\r\n    const disableEventHandler = this.getAttribute(ATTRIBUTES.disableDefaultEventHandler) === 'true';\r\n\r\n    if (disableEventHandler !== this.defaultEventHandlerDisabled) {\r\n      // eslint-disable-next-line no-empty\r\n      if (!disableEventHandler) {\r\n      } else {\r\n        if (this.unsubscribeFromWidgetEvents) {\r\n          this.unsubscribeFromWidgetEvents();\r\n        }\r\n        if (this.unsubscribeFromKeycloakEvent) {\r\n          this.unsubscribeFromKeycloakEvent();\r\n        }\r\n      }\r\n      this.defaultEventHandlerDisabled = disableEventHandler;\r\n    }\r\n  }\r\n\r\n  render() {\r\n    ReactDOM.render(\r\n        <Provider>\r\n          <UserInfoProvider>\r\n            <DiagnosticsProvider>\r\n              <App/>\r\n            </DiagnosticsProvider>\r\n          </UserInfoProvider>\r\n        </Provider>,\r\n        this.mountPoint\r\n    );\r\n  }\r\n\r\n}\r\n\r\ncustomElements.define('card-diagnostics', WidgetElement);\r\n\r\nexport default WidgetElement;\r\n","export const KEYCLOAK_EVENT_TYPE = 'keycloak';\r\n","import i18n from \"i18next\";\r\nimport detector from \"i18next-browser-languagedetector\";\r\nimport translationEN from './locales/en.json';\r\nimport {reactI18nextModule} from \"react-i18next\";\r\n\r\n// the translations\r\nconst resources = {\r\n  en: {\r\n    translation: translationEN\r\n  }\r\n};\r\n\r\ni18n\r\n.use(detector)\r\n.use(reactI18nextModule) // passes i18n down to react-i18next\r\n.init({\r\n  resources,\r\n  lng: \"en\",\r\n\r\n  keySeparator: false, // we do not use keys in form messages.welcome\r\n\r\n  interpolation: {\r\n    escapeValue: false // react already safes from xss\r\n  }\r\n});\r\n\r\nexport default i18n;\r\n"],"sourceRoot":""}